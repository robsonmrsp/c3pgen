Ext.data.JsonP.draw2d_storage_GoogleDrive({"tagname":"class","name":"draw2d.storage.GoogleDrive","autodetected":{},"files":[{"filename":"GoogleDrive.js","href":"GoogleDrive.html#draw2d-storage-GoogleDrive"}],"author":[{"tagname":"author","name":"Andreas Herz","email":null}],"extends":"draw2d.storage.FileStorage","members":[{"name":"constructor","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-constructor","meta":{}},{"name":"_doAuth","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-_doAuth","meta":{"private":true}},{"name":"_driveApiLoaded","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-_driveApiLoaded","meta":{"private":true}},{"name":"_fileGetCallback","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-_fileGetCallback","meta":{"private":true}},{"name":"_pickerCallback","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-_pickerCallback","meta":{"private":true}},{"name":"_showPicker","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-_showPicker","meta":{"private":true}},{"name":"checkDependencies","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-checkDependencies","meta":{"private":true}},{"name":"insertFile","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-insertFile","meta":{}},{"name":"loadRelatedCacheEntries","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-loadRelatedCacheEntries","meta":{"private":true}},{"name":"pickFileAndLoad","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-pickFileAndLoad","meta":{}},{"name":"promptForFilename","tagname":"method","owner":"draw2d.storage.FileStorage","id":"method-promptForFilename","meta":{}},{"name":"saveFile","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-saveFile","meta":{}},{"name":"updateCache","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-updateCache","meta":{"private":true}},{"name":"updateFile","tagname":"method","owner":"draw2d.storage.GoogleDrive","id":"method-updateFile","meta":{}}],"alternateClassNames":[],"aliases":{},"id":"class-draw2d.storage.GoogleDrive","short_doc":"BETA: changes can happen without notice\n\n\nApplications that use this interface must abide by all existing Terms of Se...","component":false,"superclasses":["draw2d.storage.FileStorage"],"subclasses":[],"mixedInto":[],"mixins":[],"parentMixins":[],"requires":[],"uses":[],"html":"<div><pre class=\"hierarchy\"><h4>Hierarchy</h4><div class='subclass first-child'><a href='#!/api/draw2d.storage.FileStorage' rel='draw2d.storage.FileStorage' class='docClass'>draw2d.storage.FileStorage</a><div class='subclass '><strong>draw2d.storage.GoogleDrive</strong></div></div><h4>Files</h4><div class='dependency'><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive' target='_blank'>GoogleDrive.js</a></div></pre><div class='doc-contents'><p><b>BETA: changes can happen without notice</b>\n<br>\n<br>\nApplications that use this interface must abide by all existing Terms of Service of the Google Drive API.<br>\nMost importantly, you must correctly identify yourself in your requests. Please read the documentation below before\nyou send any \"getting started\" questions or any bug reports<br></p>\n\n<p>https://developers.google.com/picker/docs/</p>\n\n<p>Example usage of the google drive and auth libs. Please note that I didn't use a parallel loading\nmechanism for the google dependencies. I did this just to simplify the example code.<br></p>\n\n<pre><code>   var app=null;\n\n   // call this after the DOM onLoad\n   //\n   function initApp(){\n         // configure the google drive FilePicker API\n         //\n         draw2d.storage.GoogleDrive.developerKey = &lt;YOUR_GOOGLE_DEVELOPER_KEY&gt;;\n         draw2d.storage.GoogleDrive.clientId     = &lt;YOUR_GOOGLE_CIENT_ID&gt;;   \n\n         // load all dependencies for the google drive api.\n         // TODO: switch to parallel loading of scripts .. this is just a hack \n         //\n         gapi.load('auth', {'callback': function(){\n                gapi.load('picker', {'callback': function(){\n                    gapi.client.load('drive', 'v2', function(){\n\n                        // all google libs loaded well. you can now init the application.\n                        //\n                        app  = new example.Application();\n                    });\n                }});\n             }\n         });\n   }\n</code></pre>\n</div><div class='members'><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div id='method-constructor' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-constructor' target='_blank' class='view-source'>view source</a></div><strong class='new-keyword'>new</strong><a href='#!/api/draw2d.storage.GoogleDrive-method-constructor' class='name expandable'>draw2d.storage.GoogleDrive</a>( <span class='pre'></span> ) : <a href=\"#!/api/draw2d.storage.GoogleDrive\" rel=\"draw2d.storage.GoogleDrive\" class=\"docClass\">draw2d.storage.GoogleDrive</a><span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<h3 class='pa'>Returns</h3><ul><li><span class='pre'><a href=\"#!/api/draw2d.storage.GoogleDrive\" rel=\"draw2d.storage.GoogleDrive\" class=\"docClass\">draw2d.storage.GoogleDrive</a></span><div class='sub-desc'>\n</div></li></ul><p>Overrides: <a href=\"#!/api/draw2d.storage.FileStorage-method-constructor\" rel=\"draw2d.storage.FileStorage-method-constructor\" class=\"docClass\">draw2d.storage.FileStorage.constructor</a></p></div></div></div><div id='method-_doAuth' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-_doAuth' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-_doAuth' class='name expandable'>_doAuth</a>( <span class='pre'>immediate, callback</span> )<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'>Authenticate with Google Drive via the Google JavaScript API. ...</div><div class='long'><p>Authenticate with Google Drive via the Google JavaScript API.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>immediate</span> : Object<div class='sub-desc'></div></li><li><span class='pre'>callback</span> : Object<div class='sub-desc'></div></li></ul></div></div></div><div id='method-_driveApiLoaded' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-_driveApiLoaded' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-_driveApiLoaded' class='name expandable'>_driveApiLoaded</a>( <span class='pre'></span> )<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'>Called when the Google Drive API has finished loading. ...</div><div class='long'><p>Called when the Google Drive API has finished loading.</p>\n</div></div></div><div id='method-_fileGetCallback' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-_fileGetCallback' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-_fileGetCallback' class='name expandable'>_fileGetCallback</a>( <span class='pre'>file</span> )<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'>Called when file details have been retrieved from Google Drive. ...</div><div class='long'><p>Called when file details have been retrieved from Google Drive.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>file</span> : Object<div class='sub-desc'></div></li></ul></div></div></div><div id='method-_pickerCallback' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-_pickerCallback' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-_pickerCallback' class='name expandable'>_pickerCallback</a>( <span class='pre'>data</span> )<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'>Called when a file has been selected in the Google Drive file picker. ...</div><div class='long'><p>Called when a file has been selected in the Google Drive file picker.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>data</span> : Object<div class='sub-desc'></div></li></ul></div></div></div><div id='method-_showPicker' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-_showPicker' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-_showPicker' class='name expandable'>_showPicker</a>( <span class='pre'></span> )<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'>Show the file picker once authentication has been done. ...</div><div class='long'><p>Show the file picker once authentication has been done.</p>\n</div></div></div><div id='method-checkDependencies' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-checkDependencies' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-checkDependencies' class='name expandable'>checkDependencies</a>( <span class='pre'></span> )<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'>check all dependendies for the google drive api usage. ...</div><div class='long'><p>check all dependendies for the google drive api usage.</p>\n</div></div></div><div id='method-insertFile' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-insertFile' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-insertFile' class='name expandable'>insertFile</a>( <span class='pre'>fileName, base64Content, [base64Thumbnail], the</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Save a new file on the google drive. ...</div><div class='long'><p>Save a new file on the google drive.</p>\n\n<p>Example usage:</p>\n\n<pre><code>  this.saveAsButton.on(\"click\",$.proxy(function(){\n     var writer = new <a href=\"#!/api/draw2d.io.json.Writer\" rel=\"draw2d.io.json.Writer\" class=\"docClass\">draw2d.io.json.Writer</a>();\n     writer.marshal(this.canvas,$.proxy(function(json){\n          var base64Content = draw2d.util.Base64.encode(JSON.stringify(json, null, 2));\n          var fileName = prompt(\"Enter filename:\");\n          if(!fileName){\n              return;\n          }\n          this.filePicker.insertFile(fileName, content, false, $.proxy(function(file){\n              // store the file handle for further google drive operations\n              //\n              this.fileHandle = file;\n              alert(\"File saved as: \"+fileName);\n          },this));\n     },this));\n },this));\n</code></pre>\n        <p>Available since: <b>4.0.0</b></p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>fileName</span> : String<div class='sub-desc'><p>the file name if the new file</p>\n</div></li><li><span class='pre'>base64Content</span> : String<div class='sub-desc'><p>the content of the file as base64 encoded</p>\n</div></li><li><span class='pre'>base64Thumbnail</span> : String (optional)<div class='sub-desc'><p>thumbnail of the image base64 decoded. Can be null</p>\n</div></li><li><span class='pre'>the</span> : Function<div class='sub-desc'><p>callback method after a successful save operation</p>\n</div></li></ul><p>Overrides: <a href=\"#!/api/draw2d.storage.FileStorage-method-insertFile\" rel=\"draw2d.storage.FileStorage-method-insertFile\" class=\"docClass\">draw2d.storage.FileStorage.insertFile</a></p></div></div></div><div id='method-loadRelatedCacheEntries' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-loadRelatedCacheEntries' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-loadRelatedCacheEntries' class='name expandable'>loadRelatedCacheEntries</a>( <span class='pre'>filePattern</span> )<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'>Load related file names and id into the cache for fast lookup of the file ID's of\ngenerated files like PNG, JS,... ...</div><div class='long'><p>Load related file names and id into the cache for fast lookup of the file ID's of\ngenerated files like PNG, JS,...</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>filePattern</span> : Object<div class='sub-desc'></div></li></ul></div></div></div><div id='method-pickFileAndLoad' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-pickFileAndLoad' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-pickFileAndLoad' class='name expandable'>pickFileAndLoad</a>( <span class='pre'>filenameFilter, successCallback, errorCallback</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Open the file picker and load the selected file. ...</div><div class='long'><p>Open the file picker and load the selected file.<br></p>\n\n<p>Example usage:</p>\n\n<pre><code> this.openButton.on(\"click\",$.proxy(function(){\n    this.filePicker.pickFileAndLoad($.proxy(function(file, fileData){\n       // save the fileHandle for further save operations\n       this.file = file;\n\n       // cleanup the canvas \n       this.canvas.clear();\n\n       // load the JSON into the canvas\n       var reader = new <a href=\"#!/api/draw2d.io.json.Reader\" rel=\"draw2d.io.json.Reader\" class=\"docClass\">draw2d.io.json.Reader</a>();\n       reader.unmarshal(canvas, JSON.parse(fileData));\n   },this),\n   function(){\n      alert(\"unalbe to load file\");\n   });\n},this));\n</code></pre>\n        <p>Available since: <b>4.0.0</b></p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>filenameFilter</span> : String<div class='sub-desc'><p>the file picker set a file name filter with the given pattern. Only files which contains the given string will be loaded</p>\n</div></li><li><span class='pre'>successCallback</span> : Function<div class='sub-desc'><p>callback method if the user select a file and the content is loaded</p>\n</div></li><li><span class='pre'>errorCallback</span> : Function<div class='sub-desc'><p>method to call if any error happens</p>\n</div></li></ul><p>Overrides: <a href=\"#!/api/draw2d.storage.FileStorage-method-pickFileAndLoad\" rel=\"draw2d.storage.FileStorage-method-pickFileAndLoad\" class=\"docClass\">draw2d.storage.FileStorage.pickFileAndLoad</a></p></div></div></div><div id='method-promptForFilename' class='member  inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><a href='#!/api/draw2d.storage.FileStorage' rel='draw2d.storage.FileStorage' class='defined-in docClass'>draw2d.storage.FileStorage</a><br/><a href='source/FileStorage.html#draw2d-storage-FileStorage-method-promptForFilename' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.FileStorage-method-promptForFilename' class='name expandable'>promptForFilename</a>( <span class='pre'>successCallback, abortCallback</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Request a filename for a new file. ...</div><div class='long'><p>Request a filename for a new file. The application can use this platform depending\nfilename selector before the saveFile function is called.</p>\n        <p>Available since: <b>4.2.0</b></p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>successCallback</span> : Object<div class='sub-desc'></div></li><li><span class='pre'>abortCallback</span> : Object<div class='sub-desc'></div></li></ul></div></div></div><div id='method-saveFile' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-saveFile' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-saveFile' class='name expandable'>saveFile</a>( <span class='pre'>fileName, base64Content, contentIsBase64, successCallback</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Save a file to the google drive backend. ...</div><div class='long'><p>Save a file to the google drive backend. Either <b>file</b> is a string or a fileHandle.<br>\nIf it is a fileHnadle a <b>updateFile</b> is called.</p>\n        <p>Available since: <b>4.0.0</b></p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>fileName</span> : String<div class='sub-desc'><p>the filename of the file</p>\n</div></li><li><span class='pre'>base64Content</span> : String<div class='sub-desc'><p>the content of the file base64 decoded</p>\n</div></li><li><span class='pre'>contentIsBase64</span> : Boolean<div class='sub-desc'><p>indicates if the provided content base64 encoded</p>\n</div></li><li><span class='pre'>successCallback</span> : Function<div class='sub-desc'><p>callback method if the save operation finished</p>\n</div></li></ul><p>Overrides: <a href=\"#!/api/draw2d.storage.FileStorage-method-saveFile\" rel=\"draw2d.storage.FileStorage-method-saveFile\" class=\"docClass\">draw2d.storage.FileStorage.saveFile</a></p></div></div></div><div id='method-updateCache' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-updateCache' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-updateCache' class='name expandable'>updateCache</a>( <span class='pre'>file</span> )<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'>Add the file handle to the cache. ...</div><div class='long'><p>Add the file handle to the cache. Required to lookup the file.id for file save operations for\nPNG or other generated files. This avoids duplicate entries in Google Drive like \"fileX (1).png, fileX (2).png,...\"</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>file</span> : Object<div class='sub-desc'></div></li></ul></div></div></div><div id='method-updateFile' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='draw2d.storage.GoogleDrive'>draw2d.storage.GoogleDrive</span><br/><a href='source/GoogleDrive.html#draw2d-storage-GoogleDrive-method-updateFile' target='_blank' class='view-source'>view source</a></div><a href='#!/api/draw2d.storage.GoogleDrive-method-updateFile' class='name expandable'>updateFile</a>( <span class='pre'>fileHandle, base64Content, contentIsBase64, successCallback</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Save a already loaded file on the google drive. ...</div><div class='long'><p>Save a already loaded file on the google drive.</p>\n\n<p>Example usage:</p>\n\n<pre><code>  this.saveButton.on(\"click\",$.proxy(function(){\n     var writer = new <a href=\"#!/api/draw2d.io.json.Writer\" rel=\"draw2d.io.json.Writer\" class=\"docClass\">draw2d.io.json.Writer</a>();\n     writer.marshal(this.canvas,$.proxy(function(json){\n         var base64Content = draw2d.util.Base64.encode(JSON.stringify(json, null, 2));\n         this.filePicker.updateFile(this.fileHandle, content, false, $.proxy(function(file){\n             // save the new file handle for further operations\n             //\n             this.fileHandle = file;\n\n             // inform the user about the success.\n             //\n             alert(\"File saved\");\n         },this));\n     },this));\n },this));\n</code></pre>\n        <p>Available since: <b>4.0.0</b></p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>fileHandle</span> : Object<div class='sub-desc'><p>the file handle of the pickFileAndLoad method</p>\n</div></li><li><span class='pre'>base64Content</span> : String<div class='sub-desc'><p>the file content as base64 coded content</p>\n</div></li><li><span class='pre'>contentIsBase64</span> : String<div class='sub-desc'><p>indicates if the provided content base64 encoded</p>\n</div></li><li><span class='pre'>successCallback</span> : Function<div class='sub-desc'><p>the callback method if the file has been saved successfully.</p>\n</div></li></ul><p>Overrides: <a href=\"#!/api/draw2d.storage.FileStorage-method-updateFile\" rel=\"draw2d.storage.FileStorage-method-updateFile\" class=\"docClass\">draw2d.storage.FileStorage.updateFile</a></p></div></div></div></div></div></div></div>","meta":{}});